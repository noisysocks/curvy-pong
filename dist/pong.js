!function(){"use strict";function t(t,e){return e={exports:{}},t(e,e.exports),e.exports}function e(t){t=t||"";var e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),e.appendChild(n)}function n(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function o(t){return!!t&&"object"==typeof t}function a(t){if(!o(t)||j.call(t)!=b||n(t))return!1;var e=I(t);if(null===e)return!0;var a=e.constructor;return"function"==typeof a&&a instanceof a&&w.call(a)==x}function r(t,e,n){function o(){d===y&&(d=y.slice())}function c(){return u}function i(t){if("function"!=typeof t)throw new Error("Expected listener to be a function.");var e=!0;return o(),d.push(t),function(){if(e){e=!1,o();var n=d.indexOf(t);d.splice(n,1)}}}function s(t){if(!a(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(p)throw new Error("Reducers may not dispatch actions.");try{p=!0,u=f(u,t)}finally{p=!1}for(var e=y=d,n=0;n<e.length;n++)e[n]();return t}function l(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");f=t,s({type:O.INIT})}if("function"==typeof e&&"undefined"==typeof n&&(n=e,e=void 0),"undefined"!=typeof n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(r)(t,e)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var f=t,u=e,y=[],d=y,p=!1;return s({type:O.INIT}),{dispatch:s,subscribe:i,getState:c,replaceReducer:l}}function c(t){var e=4294967295,n=t,o=987654321;return function(){return o=36969*(65535&o)+(o>>16)&e,n=18e3*(65535&n)+(n>>16)&e,((o<<16)+n&e)/4294967296+.5}}function i(t){return+t.toString().replace(".","")}function s(t,e,n,o){var a=c(o);return ot(n).map(function(){return{x:t,y:e,a:a()*Math.PI*2,v:a()*(G-K)+K,color:Math.floor(16777215*a())}})}function l(t,e){var n=t.ball,o=t.hold,a=t.player,r=t.computer,c=t.particles,l=Math.cos(n.a)*H,f=Math.sin(n.a)*H,u=n.x+l*e,y=n.y+f*e,d=n.a+n.va*e,p=n.va;return o>0?Object.assign({},t,{hold:o-e}):u>A/2+R/2?Object.assign({},t,{hold:J,ball:Object.assign({},at.ball)}):-A/2-R/2>u?Object.assign({},t,{hold:J,ball:Object.assign({},at.ball,{a:Math.PI+P})}):(y>B/2-R/2&&(y=B/2-R/2,d=Math.atan2(-f,l),c=c.concat(s(u,y,_,i(d)))),-B/2+R/2>y&&(y=-B/2+R/2,d=Math.atan2(-f,l),c=c.concat(s(u,y,_,i(d)))),-Q+q/2+R/2>u&&y>a.y-L/2&&y<a.y+L/2&&Math.cos(d)<0&&(u=-Q+q/2+R/2,d=Math.atan2(f,-l),p+=a.vy*N,c=c.concat(s(u,y,_,i(d)))),u>Q-q/2-R/2&&y>r.y-L/2&&y<r.y+L/2&&Math.cos(d)>0&&(u=Q-q/2-R/2,d=Math.atan2(f,-l),p+=r.vy*N,c=c.concat(s(u,y,_,i(d)))),p=Math.max(Math.min(p,Y),-Y),Object.assign({},t,{ball:Object.assign({},n,{x:u,y:y,a:d,va:p}),particles:c}))}function f(t,e,n,o,a){var r=t.vy,c=t.y+r*a,i=-B/2+L/2;i>c&&(r=-r,c=i);var s=B/2-L/2;return c>s&&(r=-r,c=s),e[V]||e[$]?(e[V]&&(r-=W),e[$]&&(r+=W)):n&&o&&(r+=(n.y-o.y)*Z),r*=U*a,Object.assign({},t,{vy:r,y:c})}function u(t,e,n){var o=t.vy,a=t.y+o*n,r=-B/2+L/2;r>a&&(o=-o,a=r);var c=B/2-L/2;return a>c&&(o=-o,a=c),Math.cos(e.a)>0&&(e.y<t.y-F&&(o-=z),e.y>t.y+F&&(o+=z)),o*=U*n,Object.assign({},t,{vy:o,y:a})}function y(t,e){return t.map(function(t){var n=Math.cos(t.a)*t.v,o=Math.sin(t.a)*t.v,a=t.x+n*e,r=t.y+o*e;return a>A/2||-A/2>a?null:r>B/2||-B/2>r?null:Object.assign({},t,{x:a,y:r})}).filter(function(t){return t})}function d(){var t=arguments.length<=0||void 0===arguments[0]?at:arguments[0],e=arguments[1];switch(e.type){case k:var n=Object.assign({},t,l(t,e.dt));return Object.assign({},n,{player:f(n.player,n.keys,n.touch,n.lastTouch,e.dt),computer:u(n.computer,n.ball,e.dt),particles:y(n.particles,e.dt)});case E:case M:return Object.assign({},t,{keys:Object.assign({},t.keys,m.defineProperty({},e.keyCode,e.type===E))});case C:return Object.assign({},t,{touch:{x:e.x,y:e.y}});case S:return Object.assign({},t,{touch:{x:e.x,y:e.y},lastTouch:t.touch});case T:return Object.assign({},t,{touch:null,lastTouch:null});default:return t}}function p(t,e,n,o,a){var r=arguments.length<=5||void 0===arguments[5]?0:arguments[5],c=arguments.length<=6||void 0===arguments[6]?et:arguments[6];t.save(),t.translate(e,n),t.rotate(r),t.fillStyle=c,t.fillRect(-o/2,-a/2,o,a),t.restore()}function h(t){var e=document.getElementById("pong").getContext("2d");e.fillStyle=tt,e.fillRect(0,0,A*D,B*D),e.save(),e.scale(D,D),e.translate(A/2,B/2),t.particles.forEach(function(t){return p(e,t.x,t.y,X,X,0,"#"+t.color.toString(16))}),p(e,t.ball.x,t.ball.y,R,R,t.ball.a),p(e,-Q,t.player.y,q,L),p(e,Q,t.computer.y,q,L),e.restore()}function v(){var t=(new Date-ct)/1e3;ct=new Date,rt.dispatch({type:k,dt:t}),h(rt.getState()),window.requestAnimationFrame(v)}var m={};m.defineProperty=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t};var b="[object Object]",g=Object.prototype,w=Function.prototype.toString,x=w.call(Object),j=g.toString,I=Object.getPrototypeOf,O={INIT:"@@redux/INIT"},k="tick",E="keyDown",M="keyUp",C="touchDown",S="touchMove",T="touchUp",A=600,B=400,D=2,R=20,H=400,N=.002,Y=2,P=Math.PI/9,Q=A/2-20,q=10,L=70,U=57,W=40,Z=4,z=20,F=25,J=2,X=2,K=100,G=300,_=200,V=38,$=40,tt="#fff",et="#666",nt=t(function(t){t.exports=function(t,e){var n="number"==typeof t,o="number"==typeof e;n&&!o?(e=t,t=0):n||o||(t=0,e=0),t=0|t,e=0|e;var a=e-t;if(0>a)throw new Error("array length must be positive");for(var r=new Array(a),c=0,i=t;a>c;c++,i++)r[c]=i;return r}}),ot=nt&&"object"==typeof nt&&"default"in nt?nt["default"]:nt,at={hold:0,ball:{x:0,y:0,a:P,va:0},player:{y:0,vy:0},computer:{y:0,vy:0},particles:[],keys:{},touch:null,lastTouch:null};e('@font-face{font-family:Inconsolata;font-style:normal;font-weight:400;src:local(Inconsolata),url(//fonts.gstatic.com/s/inconsolata/v11/BjAYBlHtW3CJxDcjzrnZCGfQcKutQXcIrRfyR5jdjY8.eot#) format("eot"),url(//fonts.gstatic.com/s/inconsolata/v11/BjAYBlHtW3CJxDcjzrnZCI4P5ICox8Kq3LLUNMylGO4.woff2) format("woff2"),url(//fonts.gstatic.com/s/inconsolata/v11/BjAYBlHtW3CJxDcjzrnZCIbN6UDyHWBl620a-IRfuBk.woff) format("woff")}@font-face{font-family:Inconsolata;font-style:normal;font-weight:700;src:local("Inconsolata Bold"),local(Inconsolata-Bold),url(//fonts.gstatic.com/s/inconsolata/v11/AIed271kqQlcIRSOnQH0ybFt29aCHKT7otDW9l62Aag.eot#) format("eot"),url(//fonts.gstatic.com/s/inconsolata/v11/AIed271kqQlcIRSOnQH0yYlIZu-HDpmDIZMigmsroc4.woff2) format("woff2"),url(//fonts.gstatic.com/s/inconsolata/v11/AIed271kqQlcIRSOnQH0yTqR_3kx9_hJXbbyU8S6IN0.woff) format("woff")}@import \'https://fonts.googleapis.com/css?family=Inconsolata\';body{background:#fafafa;font-family:Inconsolata,monospace;font-size:18px;height:100%;margin:0;position:fixed;text-align:center;width:100%}a,body{color:#666}#pong{height:100%}@media screen and (max-aspect-ratio:1200/800){#pong{height:auto;position:relative;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:100%}}.about{bottom:0;left:0;padding:4px;position:absolute;right:0}');var rt=r(d),ct=new Date;window.requestAnimationFrame(v),window.addEventListener("keydown",function(t){rt.dispatch({type:E,keyCode:t.keyCode})}),window.addEventListener("keyup",function(t){rt.dispatch({type:M,keyCode:t.keyCode})}),window.addEventListener("touchstart",function(t){var e=t.touches[0];rt.dispatch({type:C,x:e.clientX,y:e.clientY})}),window.addEventListener("touchmove",function(t){var e=t.touches[0];rt.dispatch({type:S,x:e.clientX,y:e.clientY})}),window.addEventListener("touchend",function(t){rt.dispatch({type:T})})}();
//# sourceMappingURL=pong.js.map